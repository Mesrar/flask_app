    sendfile        on;
        #tcp_nopush     on;
        client_max_body_size 20M;

        #keepalive_timeout  0;
        keepalive_timeout  0;

        uwsgi_read_timeout 86400;
        uwsgi_send_timeout 86400;

        #gzip  on;

        # Load modular configuration files from the /etc/nginx/conf.d directory.
        # See http://nginx.org/en/docs/ngx_core_module.html#include
        # for more information.
        include /etc/nginx/conf.d/*.conf;

    upstream hello_server {
        # docker will automatically resolve this to the correct address
        # because we use the same name as the service: "djangoapp"
        server python_api:8000;
    }

    # now we declare our main server
    server {

        listen 80;
        server_name localhost;

            location / {
                # everything is passed to Gunicorn
                proxy_pass http://hello_server/;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header Host $host;
                proxy_redirect off;
            }
    }
